(function(){"use strict";var t={9365:function(t,e,s){var a=s(8935),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Navbar"),s("div",{staticClass:"container"},[s("router-view")],1)],1)},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"blue darken-3"},[s("div",{staticClass:"nav-wrapper"},[s("router-link",{staticClass:"brand-logo link",attrs:{to:"/"}},[t._v("Мой блог")]),s("ul",{staticClass:"right hide-on-med-and-down"},[s("router-link",{staticClass:"link",attrs:{tag:"li",to:"/",exact:"","active-class":"active"}},[s("a",{attrs:{href:"#"}},[t._v(" Новый пост")])]),s("router-link",{staticClass:"link",attrs:{tag:"li",to:"/list","active-class":"active"}},[s("a",{attrs:{href:"#"}},[t._v("Список постов")])])],1)],1)])},o=[],l={},c=l,m=s(1001),u=(0,m.Z)(c,r,o,!1,null,null,null),d=u.exports,p={components:{Navbar:d}},v=p,f=(0,m.Z)(v,i,n,!1,null,null,null),h=f.exports,k=s(2809),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col s6 offset-s3"},[s("h1",[t._v("Новый пост")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[s("div",{staticClass:"input-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.title,expression:"task.title"}],staticClass:"validate",attrs:{id:"title",type:"text",required:""},domProps:{value:t.task.title},on:{input:function(e){e.target.composing||t.$set(t.task,"title",e.target.value)}}}),s("label",{attrs:{for:"title"}},[t._v("Название поста")]),s("span",{staticClass:"helper-text",attrs:{"data-error":"Укажите название"}})]),s("div",{staticClass:"input-field"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],staticClass:"materialize-textarea",attrs:{id:"description"},domProps:{value:t.task.description},on:{input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}}),s("label",{attrs:{for:"description"}},[t._v("Текст поста")]),s("span",{staticClass:"character-counter",staticStyle:{float:"right","font-size":"12px"}},[t._v(t._s(t.task.description.length)+"/1000")])]),s("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Добавить пост")])])])])},C=[],g={name:"Create_post",data:()=>({task:{description:"",title:"",id:Date.now(),comments:[]}}),methods:{submitHandler(){this.$store.dispatch("createTask",{...this.task}),this.$router.push("/list")}}},b=g,y=(0,m.Z)(b,_,C,!1,null,null,null),x=y.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Мои посты")]),s("hr"),t.$store.state.tasks.length?s("table",{staticClass:"centered"},[t._m(0),s("tbody",t._l(t.$store.state.tasks,(function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.title))]),s("td",{staticClass:"td"},[s("div",{staticClass:"text"},[t._v(t._s(e.description))])]),s("td",[t._v("Kомментариев: "+t._s(e.comments.length))]),s("td",[s("router-link",{staticClass:"btn btn-small",attrs:{tag:"button",to:"/task/"+e.id}},[t._v("Открыть")])],1),s("td",[s("i",{staticClass:"small material-icons",on:{click:function(s){return t.$store.commit("deleteTask",e.id)}}},[t._v("delete_forever")])])])})),0)]):s("p",[t._v("Нет доступных постов")])])},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Название")]),s("th",[t._v("Описание")]),s("th",[t._v("Комментарии")]),s("th",[t._v("Перейти в пост")]),s("th",[t._v("Удалить пост")])])])}],O={computed:{tasks(){return this.$store.getters.tasks}}},S=O,T=(0,m.Z)(S,$,w,!1,null,null,null),N=T.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t.task?s("div",{staticClass:"col s6 offset-s3"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[s("div",{staticClass:"input-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.title,expression:"task.title"}],staticClass:"validate",attrs:{id:"title",type:"text",required:""},domProps:{value:t.task.title},on:{input:function(e){e.target.composing||t.$set(t.task,"title",e.target.value)}}}),s("label",{staticClass:"one_post",attrs:{for:"title"}},[t._v("Название поста")]),s("span",{staticClass:"helper-text",attrs:{"data-error":"Укажите название"}})]),s("div",{staticClass:"input-field"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],staticClass:"materialize-textarea",staticStyle:{"min-height":"150px"},attrs:{id:"description"},domProps:{value:t.task.description},on:{input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}}),s("label",{staticClass:"one_post",attrs:{for:"description"}},[t._v("Текст поста")]),s("span",{staticClass:"character-counter",staticStyle:{float:"right","font-size":"12px"}},[t._v(t._s(t.task.description.length)+"/1000")])]),s("button",{staticClass:"btn",staticStyle:{"margin-right":"1rem"},attrs:{type:"submit"}},[t._v("Изменить пост")]),s("button",{staticClass:"btn red",attrs:{type:"button"},on:{click:t.openComment}},[t._v("Добавить комментарий")]),t.commentForm?s("form",{staticClass:"comments",on:{submit:function(e){return e.preventDefault(),t.addComment.apply(null,arguments)}}},[s("div",{staticClass:"input-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.title,expression:"comment.title"}],staticClass:"validate",attrs:{id:"name",type:"text",required:""},domProps:{value:t.comment.title},on:{input:function(e){e.target.composing||t.$set(t.comment,"title",e.target.value)}}}),s("label",{staticClass:"one_post",attrs:{for:"name"}},[t._v("Ваше имя")]),s("span",{staticClass:"helper-text",attrs:{"data-error":"Укажите имя"}})]),s("div",{staticClass:"input-field "},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.description,expression:"comment.description"}],staticClass:"materialize-textarea",attrs:{id:"text"},domProps:{value:t.comment.description},on:{input:function(e){e.target.composing||t.$set(t.comment,"description",e.target.value)}}}),s("label",{staticClass:"one_post",attrs:{for:"text"}},[t._v("Комментарий")])]),s("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Отправить")])]):t._e(),t.displayComment?s("h2",{staticClass:"head"},[t._v("Все комментарии")]):t._e(),t.displayComment?s("div",{staticClass:"comments"},t._l(t.task.comments,(function(e){return s("div",{key:e.id,staticClass:"top"},[s("p",[t._v("Имя: "+t._s(e.title))]),s("p",[t._v("Комментарий:"+t._s(e.description))]),s("button",{staticClass:"btn btn-small custom",on:{click:function(s){return t.deleteComment(e.id)}}},[t._v("delete")])])})),0):t._e()])]):s("p",[t._v("Задача не найдена")])])},I=[];const P={title:"",description:""};var E={data:()=>({task:{},comment:{...P},commentForm:!1,displayComment:!0}),created(){this.task={...this.$store.getters.taskById(+this.$route.params.id)}},methods:{submitHandler(){this.$store.dispatch("updateTask",{...this.task}),this.$router.push("/list")},openComment(){this.commentForm=!0},addComment(){this.comment.id=Date.now(),this.task.comments.push({...this.comment}),this.commentForm=!1,this.displayComment=!0,this.comment={...P},this.$store.dispatch("updateTask",{...this.task})},deleteComment(t){this.task.comments=this.task.comments.filter((e=>e.id!=t)),this.$store.dispatch("updateTask",{...this.task})}}},j=E,J=(0,m.Z)(j,Z,I,!1,null,null,null),z=J.exports;a.Z.use(k.Z);const D=[{path:"/",name:"create",component:x},{path:"/list",name:"list",component:N},{path:"/task/:id",name:"post",component:z}],F=new k.Z({mode:"history",base:"/",routes:D});var H=F,q=s(4665);a.Z.use(q.ZP);var B=new q.ZP.Store({state:{tasks:JSON.parse(localStorage.getItem("tasks")||"[]"),comments:JSON.parse(localStorage.getItem("comments")||"[]")},getters:{tasks:t=>t.tasks,taskById:t=>e=>t.tasks.find((t=>t.id===e)),comments:t=>t.comments,commentsById:t=>e=>t.comments.find((t=>t.id===e))},mutations:{createTask(t,e){t.tasks.push(e),localStorage.setItem("tasks",JSON.stringify(t.tasks))},updateTask(t,e){const s=t.tasks.findIndex((t=>t.id===e.id));t.tasks[s]=e,localStorage.setItem("tasks",JSON.stringify(t.tasks))},deleteTask(t,e){t.tasks=t.tasks.filter((t=>t.id!=e)),localStorage.setItem("tasks",JSON.stringify(t.tasks))},addComment(t,e){t.comments.push(e),localStorage.setItem("comments",JSON.stringify(t.comments))}},actions:{createTask({commit:t},e){t("createTask",e)},updateTask({commit:t},e){t("updateTask",e)},addComment({commit:t},e){t("addComment",e)}},modules:{}});a.Z.config.productionTip=!1,new a.Z({VueRouter:k.Z,router:H,store:B,render:t=>t(h)}).$mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,n){if(!a){var r=1/0;for(m=0;m<t.length;m++){a=t[m][0],i=t[m][1],n=t[m][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(m--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var m=t.length;m>0&&t[m-1][2]>n;m--)t[m]=t[m-1];t[m]=[a,i,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,r=a[0],o=a[1],l=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var m=l(s)}for(e&&e(a);c<r.length;c++)n=r[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(m)},a=self["webpackChunkvue_blog"]=self["webpackChunkvue_blog"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(9365)}));a=s.O(a)})();
//# sourceMappingURL=app.bc1c30e0.js.map